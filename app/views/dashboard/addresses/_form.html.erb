<%= form_with(model: [:dashboard, address], class: "space-y-6") do |form| %>
  <% if address.errors.any? %>
    <div class="bg-red-50 border border-red-200 rounded p-4">
      <h3 class="font-bold text-red-800 mb-2"><%= pluralize(address.errors.count, "error") %> prevented this address from being saved:</h3>
      <ul class="list-disc list-inside text-red-700">
        <% address.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= form.label :address_type, "Address Type", class: "block font-medium text-gray-700 mb-2" %>
    <%= form.select :address_type, 
        Address.address_types.keys.map { |type| [type.titleize, type] }, 
        {}, 
        class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
  </div>

  <div>
    <%= form.label :street_address, "Street Address", class: "block font-medium text-gray-700 mb-2" %>
    <%= form.text_field :street_address, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500", placeholder: "123 Main St" %>
  </div>

  <div>
    <%= form.label :street_address2, "Apartment, Suite, etc. (Optional)", class: "block font-medium text-gray-700 mb-2" %>
    <%= form.text_field :street_address2, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500", placeholder: "Apt 4B" %>
  </div>

  <div class="grid grid-cols-2 gap-4">
    <div>
      <%= form.label :city, class: "block font-medium text-gray-700 mb-2" %>
      <%= form.text_field :city, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500", placeholder: "San Francisco" %>
    </div>

    <div>
      <%= form.label :state, class: "block font-medium text-gray-700 mb-2" %>
      <%= form.text_field :state, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500", placeholder: "CA" %>
    </div>
  </div>

  <div class="grid grid-cols-2 gap-4">
    <div>
      <%= form.label :zip_code, "ZIP / Postal Code", class: "block font-medium text-gray-700 mb-2" %>
      <%= form.text_field :zip_code, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500", placeholder: "94102" %>
    </div>
  </div>

  <%= form.hidden_field :country, value: "United States" %>

  <div class="flex items-center">
    <%= form.check_box :is_default, class: "w-4 h-4 text-blue-600 rounded" %>
    <%= form.label :is_default, "Set as default address", class: "ml-2 text-gray-700" %>
  </div>

  <div class="flex gap-4">
    <%= form.submit class: "bg-brown text-white px-6 py-3 rounded hover:bg-brown/90 cursor-pointer" %>
    <%= link_to "Cancel", dashboard_addresses_path, class: "bg-gray-200 text-gray-700 px-6 py-3 rounded hover:bg-gray-300" %>
  </div>
<% end %>
