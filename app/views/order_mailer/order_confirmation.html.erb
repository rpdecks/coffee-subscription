<h2 style="color: #1f2937; margin-top: 0;">Order Confirmation</h2>

<p>Hi <%= @customer.first_name %>,</p>

<p>Thank you for your order! We've received it and we're getting your coffee ready.</p>

<div style="background: #f9fafb; padding: 20px; margin: 24px 0; border-radius: 8px; border: 1px solid #e5e7eb;">
  <h3 style="color: #8B4513; margin-top: 0;">Order #<%= @order.order_number %></h3>
  <p style="color: #6b7280; font-size: 14px; margin-bottom: 20px;">
    <strong>Order Date:</strong> <%= @order.created_at.strftime("%B %d, %Y") %>
  </p>

  <div style="margin: 20px 0;">
    <h4 style="color: #374151; margin-bottom: 12px;">Items:</h4>
    <% @items.each do |item| %>
      <div style="border-bottom: 1px solid #e5e7eb; padding: 12px 0;">
        <strong style="color: #1f2937;"><%= item.product.name %></strong><br>
        <span style="color: #6b7280; font-size: 14px;">
          Quantity: <%= item.quantity %>
          <% if item.grind_type.present? %> â€¢ Grind: <%= item.grind_type.titleize %><% end %>
        </span><br>
        <span style="color: #8B4513; font-weight: 600;"><%= number_to_currency(item.price) %></span>
      </div>
    <% end %>
  </div>

  <div style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #8B4513;">
    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
      <span style="color: #6b7280;">Subtotal:</span>
      <span style="color: #1f2937;"><%= number_to_currency(@order.subtotal) %></span>
    </div>
    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
      <span style="color: #6b7280;">Shipping:</span>
      <span style="color: #1f2937;"><%= number_to_currency(@order.shipping) %></span>
    </div>
    <% if @order.tax_cents > 0 %>
      <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
        <span style="color: #6b7280;">Tax:</span>
        <span style="color: #1f2937;"><%= number_to_currency(@order.tax) %></span>
      </div>
    <% end %>
    <div style="display: flex; justify-content: space-between; margin-top: 12px; padding-top: 12px; border-top: 1px solid #e5e7eb;">
      <span style="font-weight: 700; font-size: 18px; color: #1f2937;">Total:</span>
      <span style="font-weight: 700; font-size: 18px; color: #8B4513;"><%= number_to_currency(@order.total) %></span>
    </div>
  </div>

  <div style="margin-top: 24px;">
    <h4 style="color: #374151; margin-bottom: 8px;">Shipping Address:</h4>
    <p style="color: #6b7280; font-size: 14px; margin: 0;">
      <%= @order.shipping_address.street_address %><br>
      <% if @order.shipping_address.street_address_2.present? %>
        <%= @order.shipping_address.street_address_2 %><br>
      <% end %>
      <%= @order.shipping_address.city %>, <%= @order.shipping_address.state %> <%= @order.shipping_address.zip_code %>
    </p>
  </div>
</div>

<p>We'll send you another email when your order ships. If you have any questions, just reply to this email!</p>

<p style="margin-top: 24px;">
  Thanks,<br>
  <strong>The Acer Coffee Team</strong>
</p>
