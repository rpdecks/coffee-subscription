<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <style>
      body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
      .container { max-width: 600px; margin: 0 auto; padding: 20px; }
      .header { background: #8B4513; color: white; padding: 20px; text-align: center; }
      .content { background: #f9f9f9; padding: 20px; }
      .order-details { background: white; padding: 15px; margin: 20px 0; border-radius: 5px; }
      .item { border-bottom: 1px solid #eee; padding: 10px 0; }
      .total { font-size: 1.2em; font-weight: bold; margin-top: 20px; padding-top: 20px; border-top: 2px solid #8B4513; }
      .footer { text-align: center; padding: 20px; color: #666; font-size: 0.9em; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Order Confirmation</h1>
      </div>
      
      <div class="content">
        <p>Hi <%= @customer.first_name %>,</p>
        
        <p>Thank you for your order! We've received your order and we're getting it ready.</p>
        
        <div class="order-details">
          <h2>Order #<%= @order.order_number %></h2>
          <p><strong>Order Date:</strong> <%= @order.created_at.strftime("%B %d, %Y") %></p>
          
          <h3>Items:</h3>
          <% @items.each do |item| %>
            <div class="item">
              <strong><%= item.product.name %></strong><br>
              Quantity: <%= item.quantity %><br>
              <% if item.bag_size %>Size: <%= item.bag_size %><br><% end %>
              <% if item.grind_type %>Grind: <%= item.grind_type.titleize %><br><% end %>
              Price: <%= number_to_currency(item.price) %>
            </div>
          <% end %>
          
          <div class="total">
            <div>Subtotal: <%= number_to_currency(@order.subtotal) %></div>
            <div>Shipping: <%= number_to_currency(@order.shipping_cents / 100.0) %></div>
            <% if @order.tax_cents > 0 %>
              <div>Tax: <%= number_to_currency(@order.tax_cents / 100.0) %></div>
            <% end %>
            <div style="margin-top: 10px;">Total: <%= number_to_currency(@order.total) %></div>
          </div>
          
          <h3 style="margin-top: 20px;">Shipping Address:</h3>
          <p>
            <%= @order.shipping_address.street_address %><br>
            <% if @order.shipping_address.street_address_2.present? %>
              <%= @order.shipping_address.street_address_2 %><br>
            <% end %>
            <%= @order.shipping_address.city %>, <%= @order.shipping_address.state %> <%= @order.shipping_address.zip_code %>
          </p>
        </div>
        
        <p>We'll send you another email when your order ships. If you have any questions, just reply to this email!</p>
        
        <p>
          Thanks,<br>
          The Coffee Team
        </p>
      </div>
      
      <div class="footer">
        <p>You're receiving this email because you placed an order with us.</p>
      </div>
    </div>
  </body>
</html>
