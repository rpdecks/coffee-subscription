<div class="max-w-4xl mx-auto py-8">
  <h1 class="text-3xl font-bold mb-8">Email Testing Dashboard</h1>

  <div class="bg-white shadow rounded-lg p-6 mb-8">
    <h2 class="text-xl font-semibold mb-4">How This Works</h2>
    <p class="text-gray-700 mb-4">
      Click any button below to trigger that email. With <code class="bg-gray-100 px-2 py-1 rounded">letter_opener</code> configured,
      the email will automatically open in a new browser tab so you can preview it.
    </p>
    <p class="text-gray-600 text-sm">
      Note: This uses the most recent order and subscription from your database. Make sure you have test data available.
    </p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Order Emails -->
    <div class="bg-white shadow rounded-lg p-6">
      <h3 class="text-lg font-semibold mb-4 text-gray-900">Order Emails</h3>
      <div class="space-y-3">
        <%= button_to "Order Confirmation", send_test_email_path(email_type: 'order_confirmation'),
            method: :post,
            class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
            style: "background-color: #78350f;" %>
        <%= button_to "Order Shipped", send_test_email_path(email_type: 'order_shipped'),
            method: :post,
            class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
            style: "background-color: #78350f;" %>
      </div>
    </div>

    <!-- Subscription Emails -->
    <div class="bg-white shadow rounded-lg p-6">
      <h3 class="text-lg font-semibold mb-4 text-gray-900">Subscription Emails</h3>
      <div class="space-y-3">
        <%= button_to "Subscription Created", send_test_email_path(email_type: 'subscription_created'),
            method: :post,
            class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
            style: "background-color: #78350f;" %>
        <%= button_to "Subscription Paused", send_test_email_path(email_type: 'subscription_paused'),
            method: :post,
            class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
            style: "background-color: #78350f;" %>
        <%= button_to "Subscription Resumed", send_test_email_path(email_type: 'subscription_resumed'),
            method: :post,
            class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
            style: "background-color: #78350f;" %>
        <%= button_to "Subscription Cancelled", send_test_email_path(email_type: 'subscription_cancelled'),
            method: :post,
            class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
            style: "background-color: #78350f;" %>
        <%= button_to "Payment Failed", send_test_email_path(email_type: 'payment_failed'),
            method: :post,
            class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
            style: "background-color: #78350f;" %>
      </div>
    </div>

    <!-- Contact Email -->
    <div class="bg-white shadow rounded-lg p-6">
      <h3 class="text-lg font-semibold mb-4 text-gray-900">Contact Form</h3>
      <div class="space-y-3">
        <%= button_to "Contact Form Submission", send_test_email_path(email_type: 'contact_form'),
            method: :post,
            class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
            style: "background-color: #78350f;" %>
      </div>
    </div>

    <!-- Devise Emails -->
    <div class="bg-white shadow rounded-lg p-6">
      <h3 class="text-lg font-semibold mb-4 text-gray-900">Account Emails (Devise)</h3>
        <div class="space-y-3">
        <%= button_to "Email Confirmation", send_test_email_path(email_type: 'confirmation_instructions'),
          method: :post,
          class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
          style: "background-color: #78350f;" %>
        <%= button_to "Password Reset", send_test_email_path(email_type: 'reset_password_instructions'),
          method: :post,
          class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
          style: "background-color: #78350f;" %>
        <%= button_to "Password Changed", send_test_email_path(email_type: 'password_change'),
          method: :post,
          class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
          style: "background-color: #78350f;" %>
        <%= button_to "Email Changed", send_test_email_path(email_type: 'email_changed'),
          method: :post,
          class: "w-full px-4 py-2 text-white rounded-lg transition-colors font-medium cursor-pointer",
          style: "background-color: #78350f;" %>
        </div>
    </div>
  </div>

  <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6">
    <h3 class="text-lg font-semibold mb-3 text-blue-900">Database Status</h3>
    <div class="grid grid-cols-2 gap-4 text-sm">
      <div>
        <span class="text-blue-700">Orders:</span>
        <span class="font-semibold"><%= Order.count %></span>
      </div>
      <div>
        <span class="text-blue-700">Subscriptions:</span>
        <span class="font-semibold"><%= Subscription.count %></span>
      </div>
      <div>
        <span class="text-blue-700">Last Order:</span>
        <span class="font-semibold"><%= @order&.order_number || 'None' %></span>
      </div>
      <div>
        <span class="text-blue-700">Last Subscription:</span>
        <span class="font-semibold"><%= @subscription&.subscription_plan&.name || 'None' %></span>
      </div>
    </div>
  </div>

  <div class="mt-6">
    <%= link_to "â† Back to Home", root_path, class: "text-coffee-700 hover:text-coffee-900" %>
  </div>
</div>
